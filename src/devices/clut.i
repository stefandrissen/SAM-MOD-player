; colour look up table (clut)

;-------------------------------------------------------------------------------

properties.clut:

    defw 0                      ; init routine
    defb 0
    defw @out                   ; sample out routine
    defb @out.len
    defw 0                      ; buffer init routine
    defb 0
    defw port.clut              ; bc - output port
    ;     GRB!grb
    defb %0110100               ; e - control
    defb %0010111               ; d - control
    defw @timing.ram            ; timing table internal RAM
    defw @timing.megabyte       ; timing table external RAM (megabyte)
    defb 6                      ; bits per channel

;-------------------------------------------------------------------------------

@out:

                ; T-s  bytes
    out (c),e   ; 16   2
    inc b       ;  4   1
    outi        ; 24   2
    out (c),d   ; 16   2
    inc b       ;  4   1
    outi        ; 24   2

    @out.len: equ $ - @out

;-------------------------------------------------------------------------------

@timing.ram:

    ; bpio f8 if peek( pc+1 ) == 51 and dline >= 0n258

    defb      33    ; 259:006 260:198
    defb 121,121    ; 262:006 263:198
    defb 121,121    ; 265:006 266:198
    defb 121,121    ; 268:006 269:198
    defb 121,121    ; 271:006 272:198
    defb 121,121    ; 274:006 275:198
    defb 121,121    ; 277:006 278:198
    defb 121,121    ; 280:006 281:198
    defb 121,121    ; 283:006 284:198
    defb 121,121    ; 286:006 287:198
    defb 121,121    ; 289:006 290:198
    defb 121,121    ; 292:006 293:198
    defb 121,121    ; 295:006 296:198
    defb 122,121    ; 298:006 299:198
    defb 121,121    ; 301:006 302:198
    defb 121,121    ; 304:006 305:198
    defb 121,121    ; 307:006 308:198
    defb 121,121    ; 310:006 311:198
    defb 121,121    ; 001:006 002:198
    defb 121,121    ; 004:006 005:198
    defb 121,121    ; 007:006 008:198
    defb 121,121    ; 010:006 011:198
    defb 121,121    ; 013:006 014:198
    defb 121,121    ; 016:006 017:198
    defb 121,121    ; 019:006 020:198
    defb 121,121    ; 022:006 023:198
    defb 121,121    ; 025:006 026:198
    defb 123,123    ; 028:006 029:198
    defb 121,121    ; 031:006 032:198
    defb 121,121    ; 034:006 035:198
    defb 121,121    ; 037:006 038:198
    defb 121,121    ; 040:006 041:198
    defb 121,121    ; 043:006 044:198
    defb 121,121    ; 046:006 047:198
    defb 121,121    ; 049:006 050:198
    defb 121,121    ; 052:006 053:198
    defb 121,121    ; 055:006 056:198
    defb 121,121    ; 058:006 059:198
    defb 121,121    ; 061:006 062:198
    defb 121,121    ; 064:006 065:198
    defb 122,107    ; 067:006 068:198
    defb  77, 76    ; 070:006 071:198
    defb  78, 77    ; 073:006 074:198
    defb  80, 79    ; 076:006 077:198
    defb  80, 79    ; 079:006 080:198
    defb  77, 77    ; 082:006 083:198
    defb  78, 76    ; 085:006 086:198
    defb  79, 78    ; 088:006 089:198
    defb  80, 80    ; 091:006 092:198
    defb  79, 78    ; 094:006 095:198
    defb  77, 77    ; 097:006 098:190 ! 78 = 206
    defb  79, 76    ; 100:006 101:198
    defb  78, 77    ; 103:006 104:198
    defb  80, 79    ; 106:006 107:198
    defb  79, 79    ; 109:006 110:198
    defb  77, 77    ; 112:006 113:198
    defb  77, 76    ; 115:006 116:198
    defb  78, 77    ; 118:006 119:198
    defb  80, 79    ; 121:006 122:198
    defb  79, 79    ; 124:006 125:198
    defb  77, 77    ; 127:006 128:198
    defb  77, 77    ; 130:006 131:198
    defb 0

    defb -1,-1,-1,-1,-1

    defb 81

    assert $ - @timing.ram == 130

;-------------------------------------------------------------------------------

@timing.megabyte:

    ; bpio f8 if peek( pc+1 ) == 51 and dline >= 0n258

    defb      34    ; 259:006 260:198
    defb 121,121    ; 262:006 263:198
    defb 121,121    ; 265:006 266:198
    defb 121,121    ; 268:006 269:198
    defb 121,121    ; 271:006 272:198
    defb 121,121    ; 274:006 275:198
    defb 121,121    ; 277:006 278:198
    defb 121,121    ; 280:006 281:198
    defb 121,121    ; 283:006 284:198
    defb 121,121    ; 286:006 287:198
    defb 121,121    ; 289:006 290:198
    defb 121,121    ; 292:006 293:198
    defb 121,121    ; 295:006 296:198
    defb 124,121    ; 298:006 299:198
    defb 121,121    ; 301:006 302:198
    defb 121,121    ; 304:006 305:198
    defb 121,121    ; 307:006 308:198
    defb 121,121    ; 310:006 311:198
    defb 121,121    ; 001:006 002:198
    defb 121,121    ; 004:006 005:198
    defb 121,121    ; 007:006 008:198
    defb 121,121    ; 010:006 011:198
    defb 121,121    ; 013:006 014:198
    defb 121,121    ; 016:006 017:198
    defb 121,121    ; 019:006 020:198
    defb 121,121    ; 022:006 023:198
    defb 121,121    ; 025:006 026:198
    defb 123,126    ; 028:006 029:198
    defb 123,121    ; 031:006 032:198
    defb 121,121    ; 034:006 035:198
    defb 121,121    ; 037:006 038:198
    defb 121,121    ; 040:006 041:198
    defb 121,121    ; 043:006 044:198
    defb 121,121    ; 046:006 047:198
    defb 121,121    ; 049:006 050:198
    defb 121,121    ; 052:006 053:198
    defb 121,121    ; 055:006 056:198
    defb 121,121    ; 058:006 059:198
    defb 121,121    ; 061:006 062:198
    defb 121,121    ; 064:006 065:198
    defb 125,111    ; 067:006 068:198
    defb  82, 81    ; 070:006 071:198
    defb  81, 78    ; 073:006 074:198
    defb  82, 85    ; 076:006 077:198
    defb  83, 81    ; 079:006 080:198
    defb  82, 78    ; 082:006 083:198
    defb  83, 84    ; 085:006 086:198
    defb  81, 80    ; 088:006 089:206 !
    defb  82, 81    ; 091:006 092:198
    defb  83, 81    ; 094:006 095:198
    defb  79, 80    ; 097:006 098:198
    defb  82, 83    ; 100:006 101:198
    defb  83, 81    ; 103:006 104:198
    defb  79, 80    ; 106:006 107:198
    defb  82, 83    ; 109:006 110:198
    defb  83, 81    ; 112:006 113:198
    defb  79, 80    ; 115:006 116:198
    defb  82, 83    ; 118:006 119:198
    defb  83, 81    ; 121:006 122:198
    defb  79, 80    ; 124:006 125:198
    defb  82, 83    ; 127:006 128:198
    defb 0

    defb -1,-1,-1,-1,-1,-1,-1

    defb 81         ; t-states to 1.5 from line interrupt

    assert $ - @timing.megabyte == 130

;-------------------------------------------------------------------------------

